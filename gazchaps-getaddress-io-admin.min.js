!function(e){var t=[];function s(e){var s="";if(e.id.indexOf("billing_")>-1?s="billing":e.id.indexOf("shipping_")>-1&&(s="shipping"),s){var o=document.getElementById("_"+s+"_postcode").value.replace(/[^A-Za-z0-9]/g,"").toUpperCase();o.length>0&&function(e,s,o){if(void 0!==t[e+"_"+s])return void a(t[e+"_"+s]);var d;if(d="action=gazchaps_woocommerce_getaddress_io_wp_admin",d+="&postcode="+e,d+="&address_type="+s,XMLHttpRequest){o&&(o.value=gazchaps_getaddress_io.searching_text,o.disabled=!0);var n=new XMLHttpRequest;n.open("POST",gazchaps_getaddress_io.ajax_url),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onload=function(){o&&(o.value=gazchaps_getaddress_io.button_text,o.disabled=!1);var d,l,i=JSON.parse(n.responseText);i.error_code?alert(i.error):(t[e+"_"+s]=i,d=i,(l=document.getElementById("_"+d.address_type+"_postcode"))&&d.postcode&&(l.value=d.postcode),a(i))},n.onerror=function(){o&&(o.value=gazchaps_getaddress_io.button_text,o.disabled=!1)},n.send(d)}}(o,s,e)}}function a(t){var s="_"+t.address_type+"_gazchaps_getaddress_io_postcode_lookup_addresses",a=document.getElementById(s),o=document.getElementsByClassName(s+"_field")[0];if(a){var d=a.querySelectorAll("option");for(var n in d)d.hasOwnProperty(n)&&d[n].remove()}if(t.address_count>0){var l,i;for(var n in(i=document.createElement("option")).value="",i.innerHTML=t.select_placeholder,a.appendChild(i),t.addresses)t.addresses.hasOwnProperty(n)&&(l=t.addresses[n],(i=document.createElement("option")).value=l.option,i.innerHTML=l.label,a.appendChild(i));e&&e.fn.select2&&e("#"+s).select2()}o&&(o.style.display="")}var o=document.getElementsByClassName("gazchaps_getaddress_io_postcode_lookup_button");if(o.length>0)for(var d,n,l,i,r,_,p=0;p<o.length;p++)(n=(d=o[p]).closest("p")).parentNode,n.style.float="right",n.style.clear="right",n.querySelector("label").innerHTML="&nbsp",d.value=gazchaps_getaddress_io.button_text,d.addEventListener("click",function(e){s(this)}),r=d.id.replace("gazchaps_getaddress_io_postcode_lookup_button","gazchaps_getaddress_io_postcode_lookup_addresses")+"_field",(_=document.getElementsByClassName(r)[0])&&(_.style.display="none"),l=d.id.replace("gazchaps_getaddress_io_postcode_lookup_button","postcode")+"_field",(i=document.getElementsByClassName(l)[0])&&(i.style.float="left",i.style.clear="both");e(document).on("change",".gazchaps_getaddress_io_postcode_lookup_addresses",function(e){var t=e.target.options[e.target.selectedIndex].value;""==t&&(t="||||"),function(e,t){var s="billing";e.indexOf("shipping_")>-1&&(s="shipping");for(var a,o,d=t.split("|"),n=["address_1","address_2","city","state"],l=0;l<n.length;l++)a="_"+s+"_"+n[l],null!==(o=document.getElementById(a))&&(o.value=d[l])}(e.target.id,t)}),e(document).on("change","#_billing_country, #_shipping_country",function(e){var t;t=e.target.id.indexOf("_billing")>-1?"_billing_":"_shipping_";e.target.closest("p").parentNode;var s=document.getElementsByClassName(t+"gazchaps_getaddress_io_postcode_lookup_button_field")[0],a=document.getElementsByClassName(t+"gazchaps_getaddress_io_postcode_lookup_addresses_field")[0],o=document.getElementsByClassName(t+"gazchaps_getaddress_io_postcode_lookup_addresses")[0];"GB"==e.target.options[e.target.selectedIndex].value?s&&(s.style.display=""):(s&&(s.style.display="none"),a&&(a.style.display="none"),o&&(o.disabled=!0))}),e("#_billing_country, #_shipping_country").trigger("change")}(jQuery);
